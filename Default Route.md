#network #linux 
Настройка маршрута по умолчанию в Linux

Разберем, как настроить маршрут по умолчанию в Linux, используя команды маршрутизации. 

Это базовая задача для сетевых администраторов, которая позволяет направлять весь трафик через конкретный шлюз. Давайте разберем, как это сделать шаг за шагом.

Отображение текущих маршрутов

Прежде чем настраивать новый маршрут, давайте посмотрим на текущую таблицу маршрутизации. 

Это можно сделать с помощью команды route. Выполнив её, вы увидите что-то подобное:

```
$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.1.0     *               255.255.255.0   U     0      0        0 ra0
default         dsl-router      0.0.0.0         UG    0      0        0 ra0
```

Другой способ отобразить маршруты — это использовать полный путь к утилите:

```
$ /sbin/route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
191.255.255.0   *               255.255.255.0   U     0      0        0 eth0
169.254.0.0     *               255.255.0.0     U     0      0        0 eth0
default         191.255.255.1   0.0.0.0         UG    0      0        0 eth0

```
Настройка маршрута по умолчанию

Чтобы добавить маршрут по умолчанию, используйте команду route add default gw. Синтаксис предельно прост:

```
route add default gw {IP-АДРЕС} {ИНТЕРФЕЙС}
```

• IP-АДРЕС — IP-адрес вашего шлюза.
• ИНТЕРФЕЙС — сетевой интерфейс, через который будет проходить весь трафик.

Например, чтобы направить весь трафик через шлюз 192.168.1.254, подключенный к интерфейсу eth0, выполните команду:

```
 route add default gw 192.168.1.254 eth0
```

Если вы хотите использовать hostname вместо IP-адреса, убедитесь, что он корректно резолвится через DNS:

```
route add default gw dsl-router eth0
```

Настройка маршрута с использованием команды ip

Более современный способ настройки маршрутов — это использование команды ip. 

Например, чтобы направить весь трафик через шлюз 192.168.1.254, подключенный к интерфейсу eth0, выполните:

```
ip route add 192.168.1.0/24 dev eth0
```

Если хотите указать шлюз явно:

```
ip route add 192.168.1.0/24 via 192.168.1.254
```

⚡️ Вот и всё! Теперь ваш Linux-сервер будет отправлять трафик по новому маршруту по умолчанию, обеспечивая корректную работу сети.