#cron #linux 

Для настройки доступа к crontab для конкретных пользователей на сервере Linux, нужно использовать файлы `/etc/cron.allow` и `/etc/cron.deny`. Эти файлы контролируют, какие пользователи имеют или не имеют право создавать и управлять заданиями cron. Вот как настроить доступ к crontab на App Server 1, чтобы разрешить доступ для пользователя `mark` и запретить доступ для пользователя `jerome`:

### Шаги по настройке доступа к Crontab

1. **Создание и редактирование файла `/etc/cron.allow`**:
    - Этот файл должен содержать список пользователей, которым разрешено использовать команду `crontab`. Если он не существует, его можно создать.
    - Откройте файл с помощью текстового редактора, например `nano`:

      ```sh
      sudo nano /etc/cron.allow
      ```

    - Добавьте пользователя `mark` в этот файл:

      ```plaintext
      mark
      ```

    - Сохраните и закройте файл.

2. **Создание и редактирование файла `/etc/cron.deny`**:
    - Этот файл должен содержать список пользователей, которым запрещено использовать команду `crontab`. Если он не существует, его можно создать.
    - Откройте файл с помощью текстового редактора, например `nano`:

      ```sh
      sudo nano /etc/cron.deny
      ```

    - Добавьте пользователя `jerome` в этот файл:

      ```plaintext
      jerome
      ```

    - Сохраните и закройте файл.

### Подробное объяснение

- **`/etc/cron.allow`**: Если этот файл существует, то только пользователи, перечисленные в нем, могут использовать команду `crontab`. Если пользователь не указан в этом файле и файл существует, ему будет отказано в доступе к команде `crontab`.
  
- **`/etc/cron.deny`**: Если этот файл существует и файл `/etc/cron.allow` не существует, пользователи, перечисленные в `/etc/cron.deny`, будут лишены доступа к команде `crontab`. Пользователи, не указанные в `/etc/cron.deny`, будут иметь доступ.
  
- **Приоритет**: Если существуют оба файла, `/etc/cron.allow` имеет приоритет над `/etc/cron.deny`. Это значит, что если пользователь указан в `/etc/cron.allow`, ему будет разрешено использовать `crontab`, независимо от его присутствия в `/etc/cron.deny`.

### Проверка

Для проверки корректности настроек:

1. **Для пользователя `mark`**:
    - Переключитесь на пользователя `mark`:

      ```sh
      su - mark
      ```

    - Попробуйте создать задание cron:

      ```sh
      crontab -e
      ```

    - Это должно открыть редактор crontab, что указывает на наличие доступа у `mark`.

2. **Для пользователя `jerome`**:
    - Переключитесь на пользователя `jerome`:

      ```sh
      su - jerome
      ```

    - Попробуйте создать задание cron:

      ```sh
      crontab -e
      ```

    - Это должно вернуть ошибку "доступ запрещен", что указывает на отсутствие доступа у `jerome`.

### Команды в кратком изложении

- `nano /etc/cron.allow`: Открывает или создает файл `cron.allow` для редактирования.
- `nano /etc/cron.deny`: Открывает или создает файл `cron.deny` для редактирования.
- `su - username`: Переключается на указанного пользователя.
- `crontab -e`: Открывает редактор crontab для текущего пользователя.

Следуя этим шагам, вы сможете гарантировать, что только пользователь `mark` имеет право создавать или обновлять задания cron на App Server 1, в то время как пользователю `jerome` это будет запрещено, в соответствии со стандартами безопасности.




```sh
systemctl restart crond
```