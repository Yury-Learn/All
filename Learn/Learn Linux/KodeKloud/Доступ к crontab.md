#crontab #linux #permissions #acl


Для настройки доступа к crontab для пользователей на сервере в соответствии с требованиями безопасности, вам необходимо использовать файлы `/etc/cron.allow` и `/etc/cron.deny`. Эти файлы управляют доступом к команде `crontab` для пользователей.

### Шаги для настройки crontab доступа

1. **Создайте файл `/etc/cron.allow`**:
   В этом файле перечислены пользователи, которым разрешено использовать `crontab`. Если файл существует, только пользователи, перечисленные в этом файле, могут использовать команду `crontab`.

2. **Создайте файл `/etc/cron.deny`**:
   В этом файле перечислены пользователи, которым запрещено использовать `crontab`. Этот файл имеет приоритет над `/etc/cron.allow`.

### Шаги для выполнения:

1. **Создание и редактирование файлов**:
   - **Для разрешения доступа пользователю `rose`** создайте и отредактируйте файл `/etc/cron.allow`.
   - **Для запрета доступа пользователю `eric`** создайте и отредактируйте файл `/etc/cron.deny`.

#### Конфигурация:

1. **Откройте файл `/etc/cron.allow`** и добавьте пользователя `rose`:

   ```bash
   echo "rose" | sudo tee /etc/cron.allow
   ```

2. **Откройте файл `/etc/cron.deny`** и добавьте пользователя `eric`:

   ```bash
   echo "eric" | sudo tee /etc/cron.deny
   ```

### Как это работает:

- Если существует файл `/etc/cron.allow`, только пользователи, указанные в этом файле, могут использовать команду `crontab`. Если в этом файле нет имени пользователя, ему будет отказано в доступе к `crontab`.
- Если существует файл `/etc/cron.deny`, пользователи, указанные в этом файле, не могут использовать команду `crontab`, даже если они указаны в `/etc/cron.allow`.
  
### Проверка конфигурации:

1. **Для пользователя `rose`**: Попробуйте от имени пользователя `rose` создать или отредактировать задание `cron`:

   ```bash
   sudo -u rose crontab -e
   ```

   Если все настроено правильно, пользователь должен иметь возможность открывать и редактировать `crontab`.

2. **Для пользователя `eric`**: Попробуйте от имени пользователя `eric` создать или отредактировать задание `cron`:

   ```bash
   sudo -u eric crontab -e
   ```

   Пользователь должен получить сообщение об ошибке, например: `You (eric) are not allowed to use this program (crontab)`.

### Заключение:
Эти настройки гарантируют, что только пользователь `rose` имеет доступ к созданию и редактированию заданий `cron`, в то время как доступ для пользователя `eric` будет заблокирован.
