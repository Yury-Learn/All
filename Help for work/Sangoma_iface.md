iptables может блокировать исходящий трафик, обязательно нужно проверить его наличие.
systemctl status iptables - состояние службы
systemctl enable iptables - вкл
systemctl disable iptables - выкл

1. Определяем сетевую карту
	ifconfig
2. Настраиваем ip адрес. 

### nano /etc/sysconfig/network-scripts/ifcfg-eth1
	# Realtek Semiconductor Co., Ltd. RTL-8139/8139C/8139C+
	DEVICE=eth1
	BOOTPROTO=static
	ONBOOT=yes
	HWADDR=00:e0:4c:33:59:b0
	IPADDR=123.45.45.2
	NETMASK=255.255.255.252

Перезапускаем наш eth1 интерфейс:
[root@pbx src]# ifdown eth1
[root@pbx src]# ifup eth1


[root@pbx src]# ping 123.45.45.1
PING 123.45.45.1 (123.45.45.1) 56 (84) bytes of data.
64 bytes from 123.45.45.1: icmp_seq=1 ttl=64 time=0.127 ms
64 bytes from 123.45.45.1: icmp_seq=2 ttl=64 time=0.127 ms

— 123.45.45.1 ping statistics —
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.127/0.127/0.127/0.000 ms

Ага, все хорошо. Но опять же, это не значит, что нас пустят в интернет. Добавляем маршрут, например, до нашего роутера откуда работаем, через новый шлюз 123.45.45.1.

[root@pbx src]# route add -host 87.250.250.203 gw 123.45.45.1

Проверяем, что маршрут добавился
[root@pbx src]# route -n
Kernel IP routing table
Destination    Gateway        Genmask        Flags Metric Ref   Use Iface
87.250.250.203 123.45.45.1     255.255.255.255 UGH  0     0       0 eth1
192.168.192.0  0.0.0.0        255.255.255.0  U    0     0       0 eth0
123.45.45.0     0.0.0.0        255.255.255.0  U    0     0       0 eth1
169.254.0.0    0.0.0.0        255.255.0.0    U    0     0       0 eth1
0.0.0.0        192.168.192.1  0.0.0.0        UG   0     0       0 eth0

Выполням ping 87.250.250.203 и traceroute 87.250.250.203, удостоверяемся, что все проходит удачно. Для гарантии добавьте маршруты до DNS сервера, который будет использоваться и еще какой-нибудь узел в интернете. Если все пингуется, значит наш gw пускает в интернет. Теперь можно сменить маршрут по умолчанию на новый, а старый закомментировать.

[root@pbx ~]# nano /etc/sysconfig/network-scripts/ifcfg-eth0
# Broadcom Corporation NetXtreme BCM5723 Gigabit Ethernet PCIe
DEVICE=eth0
BOOTPROTO=none
HWADDR=2c:41:38:87:88:43
ONBOOT=yes
NETMASK=255.255.255.0
IPADDR=192.168.192.87
#GATEWAY=192.168.192.1
TYPE=Ethernet

[root@pbx ~]# nano /etc/sysconfig/network-scripts/ifcfg-eth1
# Realtek Semiconductor Co., Ltd. RTL-8139/8139C/8139C+
DEVICE=eth1
BOOTPROTO=static
ONBOOT=yes
HWADDR=00:e0:4c:33:59:b0
IPADDR=123.45.45.2
NETMASK=255.255.255.252
GATEWAY=123.45.45.1

Если все сделано верно, то выполняем перезагрузку всех сетевых интерфейсов
[root@pbx ~]# service network restart

Внимание: убедитесь, что правила iptables позволяют сделать подключение из чужой сети. Временно выключить защиту можно командой: service iptables stop
И если все прошло гладко, то вы уже сможете подключится через внешний IP.

Внимание: возможны отличия в конфигурации, внимательно подходите к этому вопросу, если сервер находится далеко и нет KVM.

3. Настройка роутинга
Итак, мы добавили второй интерфейс, настроили его. Теперь может встать задача, настройки маршрутизации трафика до определенного хоста или сети через старый шлюз (например, там трафик дешевле). Для этого необходимо прописать маршрут. Это делается командой route.
[root@pbx src]#route add -host 95.11.13.5 gw 192.168.192.1 dev eth0

Делаем ping и traceroute (mtr) до хоста 95.11.13.5. Видим, что трафик идет через указанный шлюз.

Примечание: часто думают, что на этом настройка закончена, но после перезагрузки или рестарта сетевых интерфейсов маршруты слетают. Тут и добавка в rc.local может не помочь
Правильно прописать маршруты «навсегда» так.
Создаем файл:

[root@pbx src]#nano /etc/sysconfig/network-scripts/route-eth0
ADDRESS0=95.11.13.5
GATEWAY0=192.168.192.1
NETMASK0=255.255.255.255

Сохраняем. Теперь после service network restart данный маршрут пропишется автоматически.

Примечание: ethX тот, который находится в одной сети с шлюзом, через который мы хотим пустить трафик

DNS сервера указываются в файле /etc/resolv.conf
Впишите нужные. После правки что-то перегружать не нужно.

Например,

nameserver 8.8.8.8
nameserver 208.67.222.222

Сетевый настройка завершены

4. SIP настройки для Астериск
Теперь необходимо проверить настройки SIP канал для Астериск. Из CLI проверяем:

cli>sip show settings
….
Network Settings:
—————————
 SIP address remapping: Enabled using externaddr
 Externhost:            <none>
 Externaddr:            123.44.4.12:0
 Externrefresh:         10
 Localnet:                192.168.10.0/255.255.255.0
…

Если мы видим такое, значит ранее были сделаны настройки для NAT, 123.44.4.12 ip-адрес старого шлюза. Теперь же нам необходимо сделать переконфигурацию Астериск для корректной работы с новым внешним ip-адресом. Для этого в конфигах sip.conf нужно изменить параметры:

nat=no
externip=123.45.45.2 ;наш новый IP
localnet=192.168.192.0/255.255.255.0

Делаем sip reload. Смотрим sip show settings и если все верно, проблем с голосом больше не будет.

Внимание: если останавливали iptables, то не забудьте перенастроить (скорее всего ужесточтить правила) и запустить. Астериск на внешнем IP подвержен атакам в большей степени и об этом не стоит забывать.