1. #learn #linux #alt #bash #users #groups
2. **Зарегистрировать пользователя test1:**
`sudo useradd -u 1100 -M -N -s /sbin/nologin -d /var/spool/mail/test1 -G users,mail test1`
- `useradd`: Команда для создания нового пользователя.
- `-u 1100`: Устанавливает UID пользователя в 1100.
- `-M`: Не создавать домашний каталог.
- `-N`: Не создавать группу с именем пользователя.
- `-s /sbin/nologin`: Устанавливает запрет на вход в сеанс.
- `-d /var/spool/mail/test1`: Устанавливает домашний каталог пользователя.
- `-G users,mail`: Добавляет пользователя в группы `users` и `mail`.
2. **Создать учетную запись для пользователя test2:**
`sudo useradd test2`
3. **Проверить создание домашнего каталога пользователя test2:**
`ls -l /home/test2`
- Если домашний каталог создан, вы увидите его в списке, и его владельцем будет пользователь test2.
4. **Изменить имя пользователя test2 на test3:**
`sudo usermod -l test3 test2`
- `usermod`: Команда для изменения свойств пользователя.
- `-l test3`: Устанавливает новое имя пользователя.
5. **Удалить пользователя test3 и передать права владения его файлами суперпользователю и группе sys:**
`sudo userdel -r test3 sudo chown -R root:sys /home/test3`
- `userdel -r test3`: Удаляет пользователя test3 вместе с его домашним каталогом (`-r`).
- `chown -R root:sys /home/test3`: Передает права владения домашним файлам пользователя test3 суперпользователю и группе sys.
6. **Найти и изучить другой конфигурационный файл, влияющий на поведение команды useradd:**
`man useradd`
В справке вы найдете упоминание файлов `/etc/login.defs` и `/etc/default/useradd`, которые могут влиять на поведение команды `useradd`. Прочтите их содержимое, чтобы найти настройку, отвечающую за минимальный UID для новых пользователей.
7. **Зарегистрировать пользователя test4 с настройками по умолчанию и установить для него пароль:**
`sudo useradd test4 sudo passwd test4`
8. **Изучить содержимое записи пользователя test4 в файле /etc/shadow:**
`sudo grep test4 /etc/shadow`
9. **Установить дату устаревания пароля для пользователя test4 на 31 декабря текущего года:**
`сhage -E 2024-12-31 test4`
`sudo chage -E $(date -d '12/31' +'%Y-%m-%d') test4`
- подробнее разберем команду:
	1. `sudo`: Это команда, которая предоставляет временные привилегии суперпользователя для выполнения команды. Суперпользователь (или root) имеет расширенные права доступа, которые позволяют выполнять действия, требующие специальных разрешений.
	2. `chage`: Это команда для изменения атрибутов срока действия учетной записи пользователя в файле `/etc/shadow`. С помощью `chage` можно установить различные параметры, такие как срок действия пароля, срок действия учетной записи и другие.
	3. `-E $(date -d '12/31' +'%Y-%m-%d')`: Это опция для установки даты истечения срока действия пароля. Здесь мы используем команду `date -d '12/31' +'%Y-%m-%d'`, чтобы получить дату 31 декабря текущего года в формате `гггг-мм-дд`. Затем эта дата передается в опцию `-E`, чтобы установить дату истечения срока действия пароля.
	4. `test4`: Это имя пользователя, для которого мы устанавливаем дату истечения срока действия пароля. Выполняя эту команду, мы устанавливаем для пользователя `test4` дату истечения срока действия пароля на 31 декабря текущего года.
	5. Итак, команда `sudo chage -E $(date -d '12/31' +'%Y-%m-%d') test4` позволяет установить дату истечения срока действия пароля для пользователя `test4` на 31 декабря текущего года.
		1. `сhage -E 2024-12-31 root`
		При наступлении указанного срока учетная запись заданного пользователя будет автоматически заблокирована.
		2. `chage -W 100 root`
		Как результат, юзер системы Linux получит предупреждение о смене пароля заранее (за десять дней до истечения срока).



6. **Проверить изменения в /etc/shadow:**
`sudo grep test4 /etc/shadow`




1.**Удалить пароль пользователя и проверить изменения в /etc/shadow:**
`sudo passwd -d test4 sudo grep test4 /etc/shadow`
12. **Заблокировать учетную запись test4:**
`sudo usermod -L test4`
13. **Создать группу пользователей xusers с GID 1010:**
`sudo groupadd -g 1010 xusers`
14. **Зарегистрировать себя в качестве участника группы xusers:**
`sudo usermod -aG xusers your_username`
15. **Добавить пользователя test4 в группу xusers:**
`sudo usermod -aG xusers test4`
16. **Найти утилиту для изменения имен и GID групп и изменить имя группы на yusers:**
`sudo groupmod -n yusers xusers`

Теперь вы завершили выполнение всех указанных шагов. Убедитесь, что вы внимательно проверили каждый шаг, чтобы избежать возможных ошибок и проблем.
подробнее разберем команду `sudo chage -E $(date -d '12/31' +'%Y-%m-%d') test4`:
- `sudo`: Это команда, которая предоставляет временные привилегии суперпользователя для выполнения команды. Суперпользователь (или root) имеет расширенные права доступа, которые позволяют выполнять действия, требующие специальных разрешений.
- `chage`: Это команда для изменения атрибутов срока действия учетной записи пользователя в файле `/etc/shadow`. С помощью `chage` можно установить различные параметры, такие как срок действия пароля, срок действия учетной записи и другие.
- `-E $(date -d '12/31' +'%Y-%m-%d')`: Это опция для установки даты истечения срока действия пароля. Здесь мы используем команду `date -d '12/31' +'%Y-%m-%d'`, чтобы получить дату 31 декабря текущего года в формате `гггг-мм-дд`. Затем эта дата передается в опцию `-E`, чтобы установить дату истечения срока действия пароля.
- `test4`: Это имя пользователя, для которого мы устанавливаем дату истечения срока действия пароля. Выполняя эту команду, мы устанавливаем для пользователя `test4` дату истечения срока действия пароля на 31 декабря текущего года.
- Итак, команда `sudo chage -E $(date -d '12/31' +'%Y-%m-%d') test4` позволяет установить дату истечения срока действия пароля для пользователя `test4` на 31 декабря текущего года.