---
tags: kernel, drivers
---


1. Ядро Linux является основой дистрибутивов Linux. 
	
	Оно связывает аппаратное и программное обеспечение компьютера, а также отвечает за распределение доступных ресурсов. 
	
	Если вы хотите отключить несколько опций и драйверов или попробовать экспериментальные исправления, то вам необходимо будет собрать ядро вручную. 

2. Подготовка и начальная конфигурация

	- Загрузка исходного кода
		Откройте сайт kernel.org и найдите архив с исходными кодами самой свежей версии ядра (Latest Release).
	
	- Затем откройте терминал и с помощью команды wget скачайте архив с исходным кодом ядра Linux:
		```sh
		wget https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.12.10.tar.xz
		```

3. Распаковка архива с исходным кодом
	- Распакуйте архив, применив команду tar:
		```sh
		tar xvf linux-5.12.10.tar.xz
		```

4. Установка необходимых пакетов

	Нам потребуются дополнительные утилиты, с помощью которых мы произведем компиляцию и установку ядра. 
	Для этого выполните следующую команду:
	
	Пользователям #debian / #ubuntu
	
	```sh
	sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison
	```
	
	Пользователям #centos / #rhel
	
	```sh
	sudo yum groupinstall "Development Tools"
	sudo yum install ncurses-devel bison flex elfutils-libelf-devel openssl-devel
	```

5. Конфигурирование ядра

	Исходный код ядра #linux уже содержит стандартный файл конфигурации с набором различных настроек. 
	Однако вы можете сами изменить его в соответствии с вашими потребностями.
	
	- Перейдите в каталог с исходным кодом:
		```sh
		cd linux-5.12.10
		```
	
	- Скопируйте существующий файл конфигурации:
		```sh
		sudo cp -v /boot/config-$(uname -r) .config
		```
	
	- Чтобы внести изменения в файл конфигурации, выполните команду make:
		```sh
		make menuconfig
		```
	
	Данная команда запускает меню конфигурации, включающее такие параметры, как:
	
	⏺Firmware Drivers – настройка прошивки/драйверов для различных устройств
	⏺Virtualization – настройки виртуализации
	⏺File systems – настройки различных файловых систем
	
	Для навигации по меню применяются стрелки на клавиатуре. Пункт < Help > поможет вам узнать больше о различных параметрах. 
	
	Когда вы закончите вносить изменения, выберите пункт < Save >, а затем выйдите из меню с помощью пункта < Exit >.