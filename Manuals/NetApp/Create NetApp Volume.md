---
tags: netapp
---
Для настройки и управления вашим NetApp хранилищем, важно знать параметры, такие как `vserver_name`, `volume_name`, `aggregate_name`, `size`, `policy_name`, `client_ip`, и `NetApp_IP`. Вот инструкция, как узнать эти параметры.

### 1. Определение `vserver_name`
`Vserver` (Virtual Server) - это логическая структура в NetApp, позволяющая управлять данными и предоставлять доступ к ним.

Чтобы узнать имя `vserver`:
1. Подключитесь к вашему NetApp хранилищу через консоль управления или SSH.
2. Выполните следующую команду для отображения списка всех `vserver`:

```shell
::> vserver show
```

### 2. Определение `volume_name`
`Volume` - это основной логический элемент хранения данных в NetApp.

Чтобы узнать имена всех томов (volumes):
1. Выполните следующую команду:

```shell
::> volume show
```

### 3. Определение `aggregate_name`
`Aggregate` - это набор дисков, из которых создаются тома.

Чтобы узнать имена всех агрегатов:
1. Выполните следующую команду:

```shell
::> aggregate show
```

### 4. Определение `size`
`Size` - это размер тома. Это значение указывается при создании тома.

Чтобы узнать размер существующих томов:
1. Выполните следующую команду:

```shell
::> volume show -fields size
```

### 5. Определение `policy_name`
`Policy` (экспортная политика) определяет правила доступа к томам через NFS.

Чтобы узнать имена всех экспортных политик:
1. Выполните следующую команду:

```shell
::> export-policy show
```

### 6. Определение `client_ip`
`Client IP` - это IP-адрес сервера, который будет подключаться к NetApp по NFS.

Чтобы узнать IP-адрес сервера:
1. Выполните следующую команду на сервере:

```shell
ip addr show
```

Или просто:

```shell
hostname -I
```

### 7. Определение `NetApp_IP`
`NetApp IP` - это IP-адрес интерфейса на вашем NetApp, к которому будет подключаться сервер по NFS.

Чтобы узнать IP-адрес интерфейса на NetApp:
1. Выполните следующую команду:

```shell
::> network interface show
```

### Шаги для выполнения настроек на NetApp
Теперь, когда вы знаете, как определить необходимые параметры, вы можете использовать их для настройки NFS, как было описано ранее. Пример использования этих команд с найденными параметрами приведен ниже.

### Пример использования параметров
Предположим, что вы нашли следующие параметры:
- `vserver_name` = "vs1"
- `volume_name` = "vol1"
- `aggregate_name` = "aggr1"
- `size` = "100GB"
- `policy_name` = "policy1"
- `client_ip` = "192.168.1.10"
- `NetApp_IP` = "192.168.1.100"

### Пример выполнения настроек
1. Создайте том и смонтируйте его:

```shell
::> volume create -vserver vs1 -volume vol1 -aggregate aggr1 -size 100GB
::> volume mount -vserver vs1 -volume vol1 -junction-path /data
```

2. Установите право собственности и права доступа:

```shell
::> volume file-directory modify -vserver vs1 -path /data -user 36 -group 36 -security-style unix
::> volume file-directory modify -vserver vs1 -path /data -mode 0755
```

3. Настройте экспортную политику:

```shell
::> export-policy rule create -vserver vs1 -policyname policy1 -clientmatch 192.168.1.10 -protocol nfs3 -ro-rule any -rw-rule any -anon 36
```

### Заключение
Эти шаги помогут вам настроить и управлять вашим NetApp хранилищем, а также правильно подготовить его для использования с Redvirt. Если у вас возникнут дополнительные вопросы или потребуется помощь, пожалуйста, дайте знать.